# Software Requirements Specification (SRS)
## ระบบ Web Application สำหรับคำนวณและติดตามค่า BMI (BMI WebApp)

---

## 1. บทนำ

### 1.1 วัตถุประสงค์ของเอกสาร
เอกสาร SRS ฉบับนี้จัดทำขึ้นเพื่อกำหนดความต้องการเชิงฟังก์ชันและไม่เชิงฟังก์ชันของระบบ Web Application สำหรับคำนวณและติดตามค่า BMI (Body Mass Index) ที่รองรับผู้ใช้หลายคน พัฒนาด้วยเทคโนโลยี Next.js (เวอร์ชันล่าสุด) และใช้ฐานข้อมูล SQLite รวมถึงฟังก์ชันรายงาน MIS Report ย้อนหลังในมิติเวลา (รายวัน รายสัปดาห์ รายเดือน รายปี)

### 1.2 ขอบเขตของระบบ
ระบบ BMI WebApp มีขอบเขตดังนี้  
- ให้ผู้ใช้หลายคน (Multi-User) สามารถลงทะเบียน/เข้าสู่ระบบ และใช้งานแยกข้อมูลกัน  
- ให้ผู้ใช้สามารถบันทึกข้อมูลน้ำหนัก ส่วนสูง และดูค่า BMI และหมวดหมู่ภาวะน้ำหนัก  
- ให้สามารถดูประวัติค่า BMI ย้อนหลัง  
- ให้มีระบบรายงาน (MIS Reports) ตามช่วงเวลา ได้แก่ รายวัน รายสัปดาห์ รายเดือน รายปี  
- พัฒนาด้วย Next.js เวอร์ชันล่าสุด เชื่อมต่อฐานข้อมูล SQLite

### 1.3 ผู้อ่านเป้าหมาย
- ทีมพัฒนา (Developer / Full-stack)
- ทีมออกแบบ UX/UI
- ผู้มีส่วนได้ส่วนเสียของโครงการ (Stakeholders)
- ผู้ทดสอบระบบ (Tester / QA)

### 1.4 คำจำกัดความ
- **BMI (Body Mass Index)**: ค่าดัชนีมวลกาย คำนวณจากน้ำหนัก(กก.) / ส่วนสูง²(เมตร²)  
- **MIS Report**: รายงานบริหารจัดการข้อมูล เพื่อวิเคราะห์แนวโน้ม/สถิติการใช้งานและค่า BMI  
- **User**: ผู้ใช้ระบบที่มีบัญชีล็อกอินของตนเอง  
- **Admin** (ถ้ามีการกำหนดภายหลัง): ผู้ดูแลระบบที่เข้าถึงรายงานรวมของผู้ใช้ทั้งหมด

---

## 2. ภาพรวมระบบ

### 2.1 ภาพรวมเชิงฟังก์ชัน
ระบบจะให้ความสามารถหลักดังนี้  
- การจัดการผู้ใช้หลายคน (สมัครสมาชิก ล็อกอิน ล็อกเอาต์)  
- การจัดการข้อมูลส่วนสูง/น้ำหนักของผู้ใช้  
- การคำนวณค่า BMI พร้อมจัดหมวดหมู่ภาวะน้ำหนัก  
- การแสดงผลข้อมูลในรูปแบบรายการและกราฟเบื้องต้น  
- การสร้างรายงาน MIS ตามช่วงเวลา (รายวัน รายสัปดาห์ รายเดือน รายปี) ทั้งในระดับผู้ใช้รายบุคคล และ (ถ้ามีการอนุญาต) รายงานรวม

### 2.2 สถาปัตยกรรมระบบ
- **Frontend/Backend Framework**: Next.js เวอร์ชันล่าสุด (ใช้ App Router ถ้าเหมาะสมกับเวอร์ชัน)  
- **ฐานข้อมูล**: SQLite  
- **รูปแบบการทำงาน**:  
  - SSR/SSG/ISR ตามความเหมาะสมของหน้า  
  - API Routes หรือ Route Handlers ของ Next.js สำหรับ CRUD และรายงาน  
- **การจัดการ Session / Authentication**: ใช้กลไกของ Next.js (เช่น NextAuth หรือโซลูชันที่ทีมเลือก) เพื่อรองรับผู้ใช้หลายคน

### 2.3 สมมติฐานและข้อจำกัด
- สมมติว่าเป็นระบบใช้งานภายในองค์กรมาตรฐานหรือบน Cloud ที่รองรับ SQLite ได้  
- ปริมาณผู้ใช้ไม่สูงมากจนเกินขีดจำกัดของ SQLite (single file database)  
- ระบบเน้นใช้งานผ่านเว็บเบราว์เซอร์บน Desktop และ Mobile Browser ยอดนิยม

---

## 3. ความต้องการเชิงฟังก์ชัน (Functional Requirements)

### 3.1 การจัดการผู้ใช้ (User Management)

#### 3.1.1 ลงทะเบียนผู้ใช้ (User Registration)
- ผู้ใช้สามารถสมัครสมาชิกด้วยข้อมูลอย่างน้อย:
  - อีเมล (ต้องไม่ซ้ำ)
  - รหัสผ่าน
  - ชื่อที่ใช้แสดงผล (Display Name)
- ระบบต้องตรวจสอบความถูกต้องของฟอร์ม (validation) ก่อนบันทึก
- รหัสผ่านต้องถูกเก็บในฐานข้อมูลแบบเข้ารหัส (hashed)

#### 3.1.2 เข้าสู่ระบบ/ออกจากระบบ (Login/Logout)
- ผู้ใช้สามารถเข้าสู่ระบบด้วยอีเมล + รหัสผ่าน
- ระบบต้องสร้าง session หรือ token เพื่อยืนยันตัวตน  
- ผู้ใช้สามารถออกจากระบบได้ และ session จะถูกยกเลิก

#### 3.1.3 โปรไฟล์ผู้ใช้ (User Profile)
- ผู้ใช้สามารถแก้ไขข้อมูลโปรไฟล์พื้นฐาน เช่น:
  - ชื่อ
  - เพศ (ถ้าจำเป็นต่อการแสดงผล)
  - ส่วนสูงเริ่มต้น หรือค่าตั้งต้นที่ใช้คำนวณ
- ระบบต้องแยกข้อมูลของผู้ใช้แต่ละคนไม่ให้เข้าถึงกัน

---

### 3.2 การจัดการข้อมูล BMI

#### 3.2.1 บันทึกข้อมูล BMI
- ผู้ใช้ (ต้องล็อกอิน) สามารถบันทึกข้อมูลในแต่ละรายการได้:
  - วันที่/เวลา
  - น้ำหนัก (กิโลกรัม)
  - ส่วนสูง (เมตร หรือเซนติเมตรโดยระบบแปลงเป็นเมตร)
  - หมายเหตุ (ไม่บังคับ)
- เมื่อบันทึก ระบบจะคำนวณค่า BMI อัตโนมัติจากสูตร:
  - BMI = น้ำหนัก (กก.) / ส่วนสูง² (เมตร²)
- ระบบต้องบันทึกค่า BMI และหมวดหมู่ภาวะน้ำหนักไปพร้อมกัน เช่น:
  - ผอมเกินไป / น้ำหนักปกติ / น้ำหนักเกิน / อ้วนระดับ 1 / อ้วนระดับ 2 (สามารถกำหนดตามเกณฑ์มาตรฐาน)

#### 3.2.2 แสดงรายการข้อมูล BMI (History)
- ผู้ใช้สามารถดูประวัติรายการ BMI ของตัวเองในรูปแบบตาราง
- สามารถเรียงลำดับตามวันที่ หรือกรองตามช่วงวันที่
- สามารถดูรายละเอียดของแต่ละรายการ (น้ำหนัก ส่วนสูง หมายเหตุ)

#### 3.2.3 Dashboard แสดงภาพรวม BMI
- แสดงค่า BMI ล่าสุด
- แสดงแนวโน้ม (trend) ของ BMI ในช่วงเวลาหนึ่ง (เช่น กราฟเส้น)
- แสดงจำนวนครั้งที่อยู่ในแต่ละหมวดหมู่ภาวะน้ำหนัก (optional แต่ควรออกแบบเผื่อใน SRS)

---

### 3.3 ระบบรายงาน MIS (MIS Reports)

#### 3.3.1 รายงานรายวัน (Daily Report)
- สามารถเลือกวันที่ (Date) เพื่อดูสรุปข้อมูล BMI สำหรับวันนั้น
- ตัวอย่างข้อมูลที่ควรมี:
  - จำนวนรายการ BMI ที่บันทึกในวันนั้น
  - ค่า BMI เฉลี่ย ต่ำสุด สูงสุด
  - แจกแจงตามหมวดหมู่ภาวะน้ำหนัก
- การแสดงผล:
  - ตารางสรุป
  - กราฟ (ถ้าจำเป็น)

#### 3.3.2 รายงานรายสัปดาห์ (Weekly Report)
- สามารถเลือกสัปดาห์ เช่น เลือกวันใดวันหนึ่ง แล้วระบบคำนวณช่วงสัปดาห์ (Monday–Sunday หรือ Sunday–Saturday ตามที่กำหนด)
- ข้อมูลสรุปในสัปดาห์:
  - จำนวนรายการทั้งหมด
  - ค่า BMI เฉลี่ยต่อวัน
  - Trend รายวัน
  - การแจกแจงหมวดหมู่ BMI เฉลี่ยรายสัปดาห์

#### 3.3.3 รายงานรายเดือน (Monthly Report)
- เลือกปีและเดือน
- ข้อมูลสรุปในเดือน:
  - จำนวนรายการทั้งหมดในเดือน
  - ค่า BMI เฉลี่ยของเดือน
  - กราฟแนวโน้มรายวัน หรือรายสัปดาห์ในเดือนนั้น
  - การแจกแจงหมวดหมู่ภาวะน้ำหนักในเดือน

#### 3.3.4 รายงานรายปี (Yearly Report)
- เลือกปี
- ข้อมูลสรุปในปี:
  - จำนวนรายการทั้งหมดในปี
  - ค่า BMI เฉลี่ยต่อเดือน
  - กราฟเปรียบเทียบ BMI เฉลี่ย 12 เดือน
  - การแจกแจงหมวดหมู่ภาวะน้ำหนักรายปี

#### 3.3.5 ขอบเขตของรายงานต่อผู้ใช้
- ผู้ใช้ทั่วไป:
  - เห็นเฉพาะรายงานที่อ้างอิงข้อมูลของตนเองเท่านั้น
- Admin (ถ้าองค์กรต้องการ):
  - เห็นรายงานรวมของผู้ใช้ทั้งหมด เช่น ค่าเฉลี่ย BMI รวม, จำนวนผู้ใช้ในแต่ละช่วง BMI เป็นต้น

---

### 3.4 การกรองและค้นหา (Filtering & Searching)
- ผู้ใช้สามารถกรองประวัติ BMI ตาม:
  - ช่วงวันที่
  - ช่วงค่า BMI (เช่น 18.5–24.9)
- สามารถค้นหาโดยหมายเหตุ (ถ้ามีข้อความบันทึก)

---

### 3.5 การจัดการข้อมูลพื้นฐาน (Master Data) (ถ้าจำเป็น)
- กำหนดค่าช่วง BMI และชื่อหมวดหมู่ผ่านค่า configuration ในระบบ (หรือ hard-coded ตามมาตรฐาน)

---

## 4. ความต้องการเชิงไม่ใช่ฟังก์ชัน (Non-Functional Requirements)

### 4.1 ประสิทธิภาพ (Performance)
- การโหลดหน้า Dashboard และประวัติไม่ควรเกิน 3 วินาทีภายใต้ปริมาณข้อมูลผู้ใช้ระดับปานกลาง
- การสร้างรายงาน MIS ควรตอบสนองได้ภายในเวลาที่เหมาะสม (ไม่เกิน 5 วินาที สำหรับช่วงข้อมูลทั่วไป)
- เพิ่มฟังก์ชัน forgot password ให้ใส่ username หรือ email เพื่อส่ง link reset password ไปยัง email ของผู้ใช้

### 4.2 ความปลอดภัย (Security)
- รหัสผ่านต้องถูกเก็บแบบเข้ารหัส (hash + salt)
- ข้อมูลผู้ใช้แต่ละคนต้องถูกจำกัดสิทธิ์การเข้าถึง (Authorization)  
- ใช้ HTTPS ในการเชื่อมต่อเมื่อใช้งานภายในระบบจริง
- ป้องกันการโจมตีพื้นฐาน เช่น SQL Injection, XSS, CSRF

### 4.3 ความน่าเชื่อถือและความพร้อมใช้งาน (Reliability & Availability)
- ระบบต้องพร้อมใช้งานมากกว่า 95% ของเวลา (ตาม SLA ที่องค์กรกำหนด)
- กำหนดกลไกสำรองฐานข้อมูล SQLite ตามนโยบาย (เช่น backup เป็นไฟล์ตามรอบเวลา)

### 4.4 การใช้งาน (Usability)
- UI ใช้งานง่ายสำหรับผู้ใช้ทั่วไป
- รองรับภาษาไทยเป็นหลัก
- รองรับการใช้งานบนอุปกรณ์มือถือ (Responsive Design)

### 4.5 การบำรุงรักษา (Maintainability)
- โครงสร้างโค้ดของ Next.js ต้องแยกส่วนชัดเจนระหว่างหน้าจอ, component, service, data layer
- ใช้ pattern ที่สอดคล้องกับแนวทางของ Next.js เวอร์ชันล่าสุด

---

## 5. ความต้องการด้านฐานข้อมูล (Database Requirements)

### 5.1 โครงสร้างข้อมูลหลัก (ระดับแนวคิด)
- ตาราง Users
  - id
  - email
  - password_hash
  - display_name
  - height_default (อาจเก็บเป็นเมตร)
  - created_at, updated_at
- ตาราง BMI_Records
  - id
  - user_id (FK → Users)
  - record_date (datetime)
  - weight
  - height
  - bmi_value
  - bmi_category
  - note
  - created_at, updated_at

(รายละเอียด schema จริงจะกำหนดในเอกสารออกแบบฐานข้อมูล)

---

## 6. ความต้องการด้านอินเตอร์เฟซ (Interface Requirements)

### 6.1 User Interface (UI)
หน้าจอหลักที่ต้องมี:
- หน้า Landing / Login / Register
- หน้า Dashboard (แสดงค่า BMI ล่าสุด + overview)
- หน้า BMI History (ตาราง + filter)
- หน้า BMI Entry (ฟอร์มกรอก/แก้ไขข้อมูล)
- หน้า MIS Reports:
  - Report Daily
  - Report Weekly
  - Report Monthly
  - Report Yearly

### 6.2 API Interface
- API สำหรับจัดการผู้ใช้: register, login, logout, get profile, update profile
- API สำหรับ BMI Records: create, read (list, detail), update, delete
- API สำหรับ MIS Reports: daily, weekly, monthly, yearly โดยรับพารามิเตอร์ช่วงเวลาและ user context

---

## 7. ข้อจำกัดและเงื่อนไขอื่น ๆ

- ต้องใช้ Next.js เวอร์ชันล่าสุด ณ วันที่เริ่มพัฒนา
- ใช้ SQLite เป็นฐานข้อมูลหลักในสCOPE นี้ (สามารถต่อยอดไป DB อื่นในอนาคตได้)
- ระบบออกแบบให้รองรับผู้ใช้หลายคน แต่รองรับปริมาณข้อมูลในระดับเล็ก-กลาง
- สามารถขยายเพิ่มเติมเรื่องสิทธิ์ (Roles/Permissions) ในเฟสถัดไป

---

## 8. เกณฑ์การยอมรับ (Acceptance Criteria) (ตัวอย่างหลัก ๆ)

- ผู้ใช้สามารถสมัครสมาชิก ล็อกอิน และบันทึกค่า BMI ได้สำเร็จ
- ค่า BMI ที่คำนวณและหมวดหมู่ภาวะน้ำหนักถูกต้องตามสูตรและเกณฑ์ที่กำหนด
- ผู้ใช้สามารถดูประวัติ BMI และกรองตามช่วงเวลาได้
- ระบบสามารถแสดงรายงาน MIS:
  - Daily: เลือกวันและแสดงสรุปได้ถูกต้อง
  - Weekly: เลือกสัปดาห์และสรุปข้อมูลได้ถูกต้อง
  - Monthly: เลือกเดือนและสรุปข้อมูลได้ถูกต้อง
  - Yearly: เลือกปีและสรุปข้อมูลได้ถูกต้อง
- ผู้ใช้แต่ละคนจะเห็นเฉพาะข้อมูลของตนเองในประวัติและรายงาน
- ระบบทำงานได้บนเบราว์เซอร์หลัก (Chrome, Edge, Safari) และแสดงผลแบบ responsive